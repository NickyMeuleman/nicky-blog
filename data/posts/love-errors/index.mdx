---
title: Love errors
date: "2020-08-30"
authors: ["nicky"]
cover: "./cover.jpg"
tags: ["Howto", "DX"]
published: false
---

<!-- Photo by Andrea Piacquadio from Pexels -->

TL;DR: Error messages are useful. **Read them.**

_"Error messages are pretty scary, right?"_

If you answered with "yes", I'd like to convince you of the opposite.

## Oh, no!

Error messages were something that I did _not_ want to see.
They indicated I did something wrong, that my code was bad and I should feel bad.

That was **wrong**.

> Your code is not garbage.
>
> <footer>
>
> [Jason Lengstorf and Chris Biscardi (on the
> LWJshow)](https://www.twitch.tv/jlengstorf/clip/KitschySteamyPicklesKippa)
>
> </footer>

While errors used to exclusively cause a sense of dread and frustration. Now they are often a source of relief, an answer to questions, ...

Don't get me wrong. They're still a source of frustration sometimes, and lots of it. Especially when one error is the thing that's preventing you from making progress.

The most annoying error messages are the ones that don't tell you anything other than "Stuff broke".

<Tweet tweetLink="EmmaBostian/status/1247478166777663488" theme="dark" />

## Gather information

When you see error messages, **READ THEM**.

Error messages are an invaluable tool to help you figure out what went wrong.
They are not only telling you there is an issue, they are the first step to fixing that issue too!

<Tweet tweetLink="markdalgleish/status/1162112105564143616" theme="dark" />
<Tweet tweetLink="waterproofheart/status/1298940388959490048" theme="dark" />

Error messages often contain a lot of relevant info. If they don't tell you exactly what's wrong or how to fix it, good ones will at least point you in the right direction.

When presented with an error message, extract as much information as possible from it.
Make an effort to understand what it's telling you.

### Again, and again

You will read code more than you write code.
For error messages, this is even more true.
(How can something be more true than true? That's not possible. These questions keep me awake at night.)

Learn by having lots of exposure to errors.
That's how I learn most about programming, by making mistakes, by deliberately breaking things.

Being perfect and following tutorials doesn't expose you to all the errors.
Those hold valuable [understanding](https://swizec.com/blog/why-understanding-beats-knowledge/).

### Context

Context is important.
The more context you have, the better.

- What language are you using, what framework.
- The specific version of that framework.
- Are you on Windows, Mac, Linux, ...
- Which browser are you using.
- ~~What did you eat for breakfast?~~

A lot of that information might not be relevant to the exact problem you're having, but more information is often better than less.

That's why a lot of open source projects require you to provide this information when you submit a bug.
It _might_ be relevant.

If you know a lot about what you are doing, the source of an error message may be clear to you.
Whereas if you dive in, the error message might have been indecipherable. This ties into the next tip, keeping the feedback loop short.

### Keep the feedback loop short

Try to keep the time between writing code, and discovering an error that code caused as short as possible.
The moment right after you write a bug, is the best moment to see the error it caused. It's the moment where you'll have the most context.

Luckily, a lot of workflows include tools to provide you with feedback as quickly as possible.

In web development, that might take the form of an automatically reloading web browser, showing you the results of the code you wrote.
That might be with [browsersync](https://www.browsersync.io/), or a fancy setup with [React Native fast refresh](https://reactnative.dev/docs/fast-refresh).  
What matters is the code you just wrote is getting executed and you will be presented with any errors it may cause quickly.

## Reading an error

Consider the following, highly sophisticated piece of code.
I'll use a JavaScript file, executed locally with [node.js](https://nodejs.org/en/)

```js title=error-testing.js
const corgi = {
  cute: true,
  bark() {
    console.log("woof");
  },
};

function squirrel() {
  console.log("The corgi sees the squirrel");
  corgi.actions.bork();
}

function walk() {
  console.log("Taking a walk, when suddenly, a squirrel appears!");
  squirrel();
}

walk();
```

It has an error, and while it might be easy to spot in this case.
Reading the error messages to get rid of the bug will be helpful!

When I tried executing this code, the following error appeared.

```
/home/nicky/error-testing.js:10
    corgi.actions.bork()
                  ^

TypeError: Cannot read property 'bork' of undefined
    at squirrel (/home/nicky/error-testing.js:10:19)
    at walk (/home/nicky/error-testing.js:15:5)
    at Object.<anonymous> (/home/nicky/error-testing.js:18:1)
    at Module._compile (internal/modules/cjs/loader.js:774:30)
    at Object.Module._extensions..js (internal/modules/cjs/loader.js:785:10)
    at Module.load (internal/modules/cjs/loader.js:641:32)
    at Function.Module._load (internal/modules/cjs/loader.js:556:12)
    at Function.Module.runMain (internal/modules/cjs/loader.js:837:10)
    at internal/main/run_main_module.js:17:11
```

### Dissecting the error

The first line tells me 2 things. It happened in the `error-testing.js` file that's in the home folder on my computer.
This is true! I already knew this, because I just made that file and I have that piece of information as [context](#context).

The `:10` tells me this error happened on line number 10.
It shows the exact piece of code that triggered the error beneath it with a caret (`^`).

`TypeError: Cannot read property 'bork' of undefined` tells you which kind of error this is. In this case, a [`TypeError`](https://nodejs.org/api/errors.html#errors_class_typeerror).
Followed by the error message.

<Aside>

The error message is usually the piece of information that'll be the most useful.

</Aside>

The next part is the [stacktrace](https://nodejs.org/api/errors.html#errors_error_stack).

For me personally.
This is what gave errors the scarefactor that made me say: _"I can't understand this, better not read"_.
They're big and unwieldy, and if you don't know which information they convey, quite indecipherable.

```
at squirrel (/home/nicky/error-testing.js:10:19)
at walk (/home/nicky/error-testing.js:15:5)
at Object.<anonymous> (/home/nicky/error-testing.js:18:1)
at Module._compile (internal/modules/cjs/loader.js:774:30)
at Object.Module._extensions..js (internal/modules/cjs/loader.js:785:10)
at Module.load (internal/modules/cjs/loader.js:641:32)
at Function.Module._load (internal/modules/cjs/loader.js:556:12)
at Function.Module.runMain (internal/modules/cjs/loader.js:837:10)
at internal/main/run_main_module.js:17:11
```

The stacktrace holds a bunch of information about _how_ your program came across the error.
It can be used to trace backwards from the error and follow which function calls eventually lead to the error.

The first line tells us that the error was found at `/home/nicky/error-testing.js`.
The `:10:19` makes it even more specific. The error happened at line 10, column 19. In other words on the 10th line, at the 19th character.
Note this is exactly the same place as indicated by the caret (`^`) previously.

The next lines are structured identically, each tracing the error back a step.

It traces the error all the way back from the `squirrel` function, to the `walk` function, and even to the internal code that was used to make this program run.

<Aside>

Stacktraces are useful to find out how the code got to the place that produced the error, but in the vast majority of cases you're interested in the top line(s).

</Aside>

### Fixing the error

So the message was `Cannot read property 'bork' of undefined`.

Ok, the location pointed me to the right place, to `corgi.actions.bork()`

That means `corgi.actions` is `undefined`.
Upon checking, there is no such thing as `actions` on the `corgi` object.
I changed `corgi.actions.bork()` to `corgi.bork()` and ran the code again.

Oh, no! Error again. Another one though. Progress!
This time the error message reads `corgi.bork is not a function`.

Silly me, I made a typo, there is no `bork` on the corgi method, that's why it's `undefined`! No borking corgis here!

Another change to `corgi.bark()`, no errors, ðŸŽ‰.

## Google for errors

Swyx wrote about how to [search the internet for your errors](https://www.swyx.io/writing/how-to-google-your-errors-2l6o)

## Examples

### React

The [React](https://reactjs.org/) library has some really helpful errors.

<Tweet tweetLink="AdamRackis/status/1163912550087647235" theme="dark" />

If you try to pass an asynchronous function to `useEffect`, a helpful error message will tell you exactly what's wrong and even tell you how to achieve what you are likely trying to do.

![a helpful error message in React](effect-error.png)

Another example is an error that appears when trying to use a [`ref`](https://reactjs.org/docs/refs-and-the-dom.html).

> That big fat error is actually really helpful:
> `Warning: Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?`
>
> <footer>
>
> My [refs in React blogpost](https://nickymeuleman.netlify.app/blog/react-refs#referring-to-a-dom-element-inside-a-react-component)
>
> </footer>

### A pseudo-element

<!-- TODO -->

### Styling

While working on my blog, specifically the block quotes, the following error popped up:

<Aside variant="danger">

```error
theme/src/components/BlogPostListPage.tsx:54:15 - error TS2322: Type 'string' is not assignable to type 'SystemStyleObject'.

54 gridTemplateColumns: `1fr`,
~~~~~~~

theme/src/components/BlogPostListPage.tsx:55:15 - error TS2322: Type 'number' is not assignable to type 'SystemStyleObject'.

55 gridGap: 4,
~~~~~~~

theme/src/components/BlogPostListPage.tsx:56:15 - error TS2322: Type 'number' is not assignable to type 'SystemStyleObject'.

56 marginBottom: 3,
~~~~~~~

theme/src/components/BlogPostListPage.tsx:57:15 - error TS2322: Type 'string' is not assignable to type 'SystemStyleObject'.

57 listStyle: `none`,
~~~~~~~

theme/src/components/BlogPostListPage.tsx:58:15 - error TS2322: Type 'number' is not assignable to type 'SystemStyleObject'.

58 padding: 0,
~~~~~~~

Found 5 errors.
```

</Aside>

At first sight, quite the unhelpful error.
I'm lots of things in the same way, and this is wrong, why?

The error pointed me this this piece of code: an `<ul>` tag styled with [`theme-ui`](https://theme-ui.com/sx-prop/).

```jsx title=BlogPostListPage.tsx
<ul
    sx={{
        display: `grid`,
        gridTemplateColumns: `1fr`,
        gridGap: 4,
        marginBottom: 3,
        listStyle: `none`,
        padding: 0,
    }}
>
```

The problem ended up being the `gridGap`.
It turns out that `gridGap` was not a part of the `SystemStyleObject` the error mentioned, but `gap` was.
After changing the `gridGap` to `gap`, all was well again.

Example of when an error is positive: example of TS error

<!-- TODO: fit into post -->

<Tweet tweetLink="swyx/status/1236438657269194753" theme="dark" />

Typescript something with an incredibly high spooky-factor. Prevented me from trying. Scared. Cryptic errors. Find tweet about better error experience in a typescript releasenote.
https://devblogs.microsoft.com/typescript/announcing-typescript-3-0/#improved-errors-and-ux

<Tweet tweetLink="typescript/status/1023972234015076352" theme="dark" />
One of the big bullet points for a major version release was "better error experience".

Sticking with it, effort to understand what errors mean. Learn by having lots of exposure to errors.
That's how you learn most programming, by making mistakes. Being perfect/following tutorials doesn't expose you to all the errors. Those hold valuable understanding (Swizec blogpost)

voorbeeld van debugging:: WesBos vid 33 min 3 (destructured import)
vid 36 min 11:40 (network graphql)

TypeScript errors are terrible?
Not because of their content, but because of how they are formatted when we see them -pic of LONG type error in VSCode-
You'll see more errors during development, in your IDE
but less during runtime, in the browser console -look up stats-

https://kentcdodds.com/blog/compound-components-with-react-hooks
De custom error die hij throwt om duidelijk te maken dat je Toggle.On etc enkel IN een `<Toggle>` kunt gebruiken en niet op zichzelf! (legt het uit in video)

<Aside variant="danger">

<details>

<summary>A long error</summary>

```error
You seem to be using a value for 'content' without quotes, try replacing it with `content: '"'\02014\000A0' "'`
    at render
    at BlockQuote (http://172.30.97.12:8000/commons.js:90414:23)
    at render
    at http://172.30.97.12:8000/commons.js:8083:30
    at wrapper (http://172.30.97.12:8000/commons.js:8078:25)
    at http://172.30.97.12:8000/commons.js:8083:30
    at MDXContent (eval at _construct (http://172.30.97.12:8000/commons.js:4898:21), <anonymous>:33:25)
    at MDXRenderer (http://172.30.97.12:8000/commons.js:32822:20)
    at article
    at render
    at div
    at render
    at main
    at render
    at render
    at Main (http://172.30.97.12:8000/commons.js:9565:23)
    at div
    at render
    at render
    at Layout (http://172.30.97.12:8000/commons.js:91049:23)
    at BlogPostPage (http://172.30.97.12:8000/commons.js:8944:19)
    at BlogPostTemplate (http://172.30.97.12:8000/commons.js:11921:19)
    at AppContainer (eval at ES6ProxyComponentFactory (http://172.30.97.12:8000/commons.js:80179:10), <anonymous>:14:7)
    at HotExportedBlogPostTemplate (eval at ES6ProxyComponentFactory (http://172.30.97.12:8000/commons.js:80179:10), <anonymous>:14:7)
    at PageRenderer (eval at ES6ProxyComponentFactory (http://172.30.97.12:8000/commons.js:80179:10), <anonymous>:14:7)
    at PageQueryStore (eval at ES6ProxyComponentFactory (http://172.30.97.12:8000/commons.js:80179:10), <anonymous>:14:7)
    at RouteHandler
    at div
    at FocusHandlerImpl (eval at ES6ProxyComponentFactory (http://172.30.97.12:8000/commons.js:80179:10), <anonymous>:14:7)
    at FocusHandler (http://172.30.97.12:8000/commons.js:16975:19)
    at RouterImpl (eval at ES6ProxyComponentFactory (http://172.30.97.12:8000/commons.js:80179:10), <anonymous>:14:7)
    at Location (http://172.30.97.12:8000/commons.js:16715:23)
    at Router
    at ScrollHandler (eval at ES6ProxyComponentFactory (http://172.30.97.12:8000/commons.js:80179:10), <anonymous>:14:7)
    at RouteUpdates (eval at ES6ProxyComponentFactory (http://172.30.97.12:8000/commons.js:80179:10), <anonymous>:14:7)
    at EnsureResources (eval at ES6ProxyComponentFactory (http://172.30.97.12:8000/commons.js:80179:10), <anonymous>:14:7)
    at LocationHandler (eval at ES6ProxyComponentFactory (http://172.30.97.12:8000/commons.js:80179:10), <anonymous>:14:7)
    at LocationProvider (eval at ES6ProxyComponentFactory (http://172.30.97.12:8000/commons.js:80179:10), <anonymous>:14:7)
    at Location (http://172.30.97.12:8000/commons.js:16715:23)
    at Root
    at MDXProvider (http://172.30.97.12:8000/commons.js:8068:46)
    at MDXScopeProvider (http://172.30.97.12:8000/commons.js:32388:25)
    at http://172.30.97.12:8000/commons.js:33047:37
    at http://172.30.97.12:8000/commons.js:8051:48
    at MDXProvider (http://172.30.97.12:8000/commons.js:8068:46)
    at MdxEmbedProvider (http://172.30.97.12:8000/commons.js:13194:23)
    at MDXProvider (http://172.30.97.12:8000/commons.js:8068:46)
    at MDXProvider$1 (http://172.30.97.12:8000/commons.js:20426:24)
    at ColorModeProvider (http://172.30.97.12:8000/commons.js:19277:22)
    at BaseProvider (http://172.30.97.12:8000/commons.js:20108:21)
    at ThemeProvider (http://172.30.97.12:8000/commons.js:20120:19)
    at ThemeProvider$1 (http://172.30.97.12:8000/commons.js:23331:19)
    at StaticQueryStore (eval at ES6ProxyComponentFactory (http://172.30.97.12:8000/commons.js:80179:10), <anonymous>:14:7)
    at _default
```

</details>

</Aside>

Writing about "love errors" and one of the points I want to make is you can use sourcemaps to figure out where the error happened.
The place I'm interested in is line 90401, but in the source code instead of the built code

```js hl=8 title=BlockQuote.js
footer: {
    fontSize: 1,
    fontWeight: "bold",
    fontStyle: "normal",
    "::before": {
    // make sure mdash is on same line as footer
    float: "left",
    content: "'\\02014\\000A0' ",
    },
},
```

Typescript something with an incredibly high spooky-factor. Prevented me from trying. Scared. Cryptic errors. Find tweet about better error experience in a typescript releasenote.

voorbeeld van debugging:: WesBos vid 33 min 3 (destructured import)
vid 36 min 11:40 (network graphql)

https://twitter.com/markdalgleish/status/1162112105564143616

When I come across surprising error, I used to exclaim: "impossible!". That changed to "mmmmm possible" (Joey joke)

TypeScript errors are terrible?
Not because of their content, but because of how they are formatted when we see them -pic of LONG type error in VSCode-
You'll see more errors during development, in your IDE
but less during runtime, in the browser console -look up stats-

https://kentcdodds.com/blog/compound-components-with-react-hooks
De custom error die hij throwt om duidelijk te maken dat je Toggle.On etc enkel IN een `<Toggle>` kunt gebruiken en niet op zichzelf! (legt het uit in video)

```
./src/components/Header.js
Module build failed (from ./node_modules/gatsby/dist/utils/babel-loader.js):
SyntaxError: /home/nicky/projects/nicky-blog/src/components/Header.js:
 Expected corresponding JSX closing tag for <Link> (86:8)
  84 |             Blog
  85 |           <Link>
> 86 |         </span>
     |         ^
  87 |       </nav>
  88 |     </header>
  89 |   );
```
