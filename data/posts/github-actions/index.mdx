---
title: Automation with GitHub Actions
date: "2020-03-30"
authors: ["nicky"]
cover: "./cover.png"
published: false
tags: ["github", "Howto", "DX"]
---

GitHub Actions provide a way to automate several workflows/tasks.

GitHub Workflows allow you to run a workflow on specific triggers.

A trigger happens, and the workflow associated with that trigger runs.

<Aside>
  The GitHub Action docs have a{" "}
  <a href="https://help.github.com/en/actions/reference/events-that-trigger-workflows">
    list of all triggers
  </a>
</Aside>

Like [git hooks](/blog/git-hooks), I think of it like automated sliding doors. When the sensor sees you, the doors open.

Some examples of things to do in a workflow: [deploying](https://lannonbr.com/blog/2020-03-31-github-actions-deploy-to-netlify/) a website, [testing](https://lannonbr.com/blog/2020-03-30-github-actions-ci-tests/) a codebase, [bundling/compiling](https://lannonbr.com/blog/2020-02-23-github-actions-webpack/) some sourcecode, ...

## Is it Workflows, or Actions?

While the branding focusses on the term "Actions", what the section above described were Workflows.

<Aside>TL;DR: Workflow big, Action small.</Aside>

A **workflow** is the entire process that performs certain tasks in response to a trigger.
Workflows are made up of one or more jobs.  
A **job** is a named set of steps, completing all steps completes that job.  
A **step** is the smallest piece in this chain.
That step executes a single (terminal) command, or an **action**.

<Aside>Actions are a collection of individual task you can combine.</Aside>

## Workflows

These workflows are described by `.yml` files located in the `.github/workflows` directory.

Those files describe exactly how that workflow runs and can contain a bunch of logic that defines when/if certain things happen.
By default, Workflows will run on a machine hosted by GitHub (called a [**runner**](https://help.github.com/en/actions/getting-started-with-github-actions/core-concepts-for-github-actions#github-hosted-runner)).

Workflows can run in Linux, macOS, Windows, and containers.
Alternatively, you can also [host your own runners](https://help.github.com/en/actions/hosting-your-own-runners/about-self-hosted-runners) to run workflows on machines you own or manage.

Using GitHub Actions is free for public repositories, private repositories include some free usage minutes by default.
For more details, check out the [pricing page](https://help.github.com/en/github/setting-up-and-managing-billing-and-payments-on-github/about-billing-for-github-actions).

<Aside>Workflows in forked repositories don't run by default.</Aside>

The [GitHub Marketplace](https://github.com/marketplace?type=actions) is a central location to find, share, and use Actions built by the GitHub community.

The [official actions](https://github.com/actions) are opensourced.
When you visit a repository for an action, a banner invites you to use it in your Workflows.

![banner for using an Action](banner-action-repo.png)

## First Github Workflow

Create a `.github` folder at the root of a (GitHub) repository.
Create a `workflows` folder inside.

YAML files inside will describe GitHub Workflows.
A repository can have more than one workflow, thus, more than one file.

The naming of this file is not important.

<Aside>I named mine `boop.yml`, just because I could.</Aside>

The following workflow is a fairly barebones one that doesn't use any Actions.
It's named `Wisdom` and executes on every push to the `master` branch.
The Workflow has a single **job**, which is (arbitrarily) named `veryImportant` and uses the latest version of Ubuntu as operating system by setting the value of the [`runs-on`](https://help.github.com/en/actions/reference/workflow-syntax-for-github-actions#jobsjob_idruns-on) setting for that job.
The job has a single **step**, that step is named again and executes a command in the terminal of that Ubuntu machine.

```yml
# .gihub/workflows/boop.yml
name: Wisdom
on:
  push:
    branches:
      - master
jobs:
  veryImportant:
    runs-on: ubuntu-latest
    steps:
      - name: Important message
        run: echo "Every 60 seconds, a minute passes."
```

You can create your own actions or use actions shared by the GitHub community and customize them as needed.

You can configure a workflow to start when a GitHub event occurs, on a schedule, or from an external event.

Artifact
Artifacts are the files created when you build and test your code. For example, artifacts might include binary or package files, test results, screenshots, or log files. Artifacts are associated with the workflow run where they were created and can be used by another job or deployed.

artefact example: code coverage report, cypress screenshot

Event
A specific activity that triggers a workflow run. For example, activity can originate from GitHub when someone pushes a commit to a repository or when an issue or pull request is created. You can also configure a workflow to run when an external event occurs using the repository dispatch webhook.
webhook: an url you visit, this triggers a workflow to run

pre-installed stuff on github hosted runners: https://help.github.com/en/actions/reference/software-installed-on-github-hosted-runners
like: Node.js, Parcel, Webpack, TypeScript, Yarn

create your own action: https://lannonbr.com/blog/2019-08-17-gh-actions-js-actions/
